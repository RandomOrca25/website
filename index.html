<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZaptoNetwork | Minecraft Server</title>
    <meta name="description" content="Join our Minecraft network with Java and Eagler support. Play now at connect.zapto.org">
    <link rel="icon" type="image/png" href="https://media.discordapp.net/attachments/1326424971714625546/1368743471812186142/Screenshot_2025-03-15_204438.png">
    
    <!-- Preload resources -->
    <link rel="preload" href="https://cdn.tailwindcss.com" as="script">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Montserrat:wght@700&display=swap" rel="stylesheet">
    
    <!-- Tailwind with custom config -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        title: ['Montserrat', 'sans-serif'],
                    },
                    colors: {
                        primary: {
                            500: '#6366f1',
                            600: '#4f46e5',
                        },
                        dark: {
                            800: '#1e1e2d',
                            900: '#121218',
                        }
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'float': 'float 6s ease-in-out infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        }
                    }
                }
            }
        }
    </script>
    
    <style>
        /* Custom styles */
        .gradient-text {
            background-clip: text;
            -webkit-background-clip: text;
            color: transparent;
        }
        
        .server-card {
            backdrop-filter: blur(10px);
            background: rgba(30, 30, 45, 0.7);
            transition: all 0.3s ease;
        }
        
        .server-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px -5px rgba(99, 102, 241, 0.3);
        }
        
        .copy-button {
            position: relative;
            overflow: hidden;
        }
        
        .copy-button::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(-100%);
            transition: transform 0.3s ease;
        }
        
        .copy-button:hover::after {
            transform: translateX(0);
        }
        
        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 8px;
        }
        
        .status-online {
            background: #10b981;
            box-shadow: 0 0 10px #10b981;
        }
        
        .status-offline {
            background: #ef4444;
            box-shadow: 0 0 10px #ef4444;
        }
        
        .status-error {
            background: #f59e0b;
            box-shadow: 0 0 10px #f59e0b;
        }
        
        .motd-line {
            display: inline-block;
            margin-right: 4px;
        }
        
        .mc-format-obfuscated {
            font-family: monospace;
            letter-spacing: 1px;
        }
        
        @keyframes obfuscate {
            0% { opacity: 1; }
            50% { opacity: 0.3; }
            100% { opacity: 1; }
        }
        
        .mc-format-obfuscated {
            animation: obfuscate 0.5s infinite;
        }
        
        /* Minecraft color classes */
        .mc-color-0 { color: #000000; } /* Black */
        .mc-color-1 { color: #0000AA; } /* Dark Blue */
        .mc-color-2 { color: #00AA00; } /* Dark Green */
        .mc-color-3 { color: #00AAAA; } /* Dark Aqua */
        .mc-color-4 { color: #AA0000; } /* Dark Red */
        .mc-color-5 { color: #AA00AA; } /* Dark Purple */
        .mc-color-6 { color: #FFAA00; } /* Gold */
        .mc-color-7 { color: #AAAAAA; } /* Gray */
        .mc-color-8 { color: #555555; } /* Dark Gray */
        .mc-color-9 { color: #5555FF; } /* Blue */
        .mc-color-a { color: #55FF55; } /* Green */
        .mc-color-b { color: #55FFFF; } /* Aqua */
        .mc-color-c { color: #FF5555; } /* Red */
        .mc-color-d { color: #FF55FF; } /* Light Purple */
        .mc-color-e { color: #FFFF55; } /* Yellow */
        .mc-color-f { color: #FFFFFF; } /* White */
        .mc-format-bold { font-weight: bold; }
        .mc-format-italic { font-style: italic; }
        .mc-format-underline { text-decoration: underline; }
        .mc-format-strikethrough { text-decoration: line-through; }
    </style>
    
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
</head>
<body class="bg-dark-900 text-gray-100 font-sans antialiased">

    <!-- Banner section-->
<header class="bg-center bg-no-repeat min-h-[70vh] sm:min-h-[80vh] w-full" style="background-image: url('https://raw.githubusercontent.com/RandomOrca25/website/main/Screenshot%202025-05-03%20213008.png'); background-size: 100% auto; background-color: #000;">
    <div class="container mx-auto text-center h-full flex items-center justify-center">
    </div>
</header>

    <main class="container mx-auto px-4 py-12 max-w-6xl">

        <!-- Announcements Section -->
<!-- Announcements Section -->
<section class="container mx-auto px-4 py-8 max-w-6xl">
    <div class="bg-gradient-to-r from-purple-900/70 to-blue-900/70 rounded-xl border border-purple-500/30 p-6 shadow-lg">
        <div class="flex items-center mb-4">
            <div class="bg-yellow-400 text-purple-900 font-bold rounded-full w-8 h-8 flex items-center justify-center mr-3">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
                </svg>
            </div>
            <h2 class="text-2xl font-bold text-white">Live Announcements</h2>
            <span id="new-announcement-badge" class="hidden ml-2 bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full animate-pulse">NEW!</span>
        </div>
        
        <div id="announcement-container" class="bg-gray-900/50 rounded-lg p-4 min-h-[100px] flex items-center justify-center">
            <p id="current-announcement" class="text-gray-300 text-center">Loading announcements...</p>
        </div>
    </div>
</section>

<!-- Audio element for notification sound -->
<audio id="ping-sound" preload="auto">
    <source src="https://assets.mixkit.co/sfx/preview/mixkit-alarm-digital-clock-beep-989.mp3" type="audio/mpeg">
</audio>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const announcementUrl = 'https://raw.githubusercontent.com/RandomOrca25/website/main/announce.txt';
    const announcementContainer = document.getElementById('current-announcement');
    const newAnnouncementBadge = document.getElementById('new-announcement-badge');
    const pingSound = document.getElementById('ping-sound');
    
    let lastContentHash = '';
    let announcements = [];
    let currentIndex = 0;
    
    // Ultra-fast checking with no caching
    async function fetchWithNoCache() {
        try {
            const response = await fetch(`${announcementUrl}?nocache=${Date.now()}`, {
                cache: 'no-store',
                headers: {
                    'Cache-Control': 'no-cache, no-store, must-revalidate',
                    'Pragma': 'no-cache',
                    'Expires': '0'
                }
            });
            
            if (!response.ok) throw new Error(`HTTP error! ${response.status}`);
            return await response.text();
        } catch (error) {
            console.error('Fetch error:', error);
            return null;
        }
    }
    
    // Process announcements
    function processAnnouncements(text) {
        return text.split('\n')
            .map(line => line.trim())
            .filter(line => line.length > 0);
    }
    
    // Display current announcement
    function showAnnouncement() {
        if (announcements.length === 0) {
            announcementContainer.textContent = 'No announcements currently';
            return;
        }
        
        announcementContainer.style.opacity = 0;
        setTimeout(() => {
            announcementContainer.textContent = announcements[currentIndex];
            announcementContainer.style.opacity = 1;
            currentIndex = (currentIndex + 1) % announcements.length;
        }, 300);
    }
    
    // Check for updates every 2 seconds (extremely fast)
    async function checkForUpdates() {
        const content = await fetchWithNoCache();
        if (!content) return;
        
        const contentHash = hashCode(content);
        if (contentHash !== lastContentHash) {
            lastContentHash = contentHash;
            const newAnnouncements = processAnnouncements(content);
            
            if (JSON.stringify(newAnnouncements) !== JSON.stringify(announcements)) {
                announcements = newAnnouncements;
                
                // Only notify if we had previous content
                if (announcements.length > 0) {
                    pingSound.play().catch(e => console.log('Audio error:', e));
                    newAnnouncementBadge.classList.remove('hidden');
                    setTimeout(() => newAnnouncementBadge.classList.add('hidden'), 2000);
                    
                    currentIndex = 0;
                    showAnnouncement();
                    
                    // Auto-rotate if multiple announcements
                    if (announcements.length > 1) {
                        clearInterval(window.announcementRotation);
                        window.announcementRotation = setInterval(showAnnouncement, 8000);
                    }
                }
            }
        }
    }
    
    // Simple hash function for content comparison
    function hashCode(str) {
        let hash = 0;
        for (let i = 0; i < str.length; i++) {
            hash = (hash << 5) - hash + str.charCodeAt(i);
            hash |= 0; // Convert to 32bit integer
        }
        return hash;
    }
    
    // Initial load
    checkForUpdates();
    
    // Check every 2 seconds for updates (extremely fast)
    window.announcementUpdater = setInterval(checkForUpdates, 2000);
    
    // Add smooth transition
    const style = document.createElement('style');
    style.textContent = `
        #current-announcement {
            transition: opacity 0.3s ease-in-out;
        }
    `;
    document.head.appendChild(style);
});
</script>
        // Enhanced version of your original script with modern features
        document.addEventListener('DOMContentLoaded', function() {
            // Elements
            const javaIpButton = document.getElementById('java-ip-button');
            const eaglerIpButton = document.getElementById('eagler-ip-button');
            const onlineStatusDisplay = document.getElementById('online-status-display');
            const statusIndicator = document.getElementById('status-indicator');
            const playerCountDisplay = document.getElementById('player-count-display');
            const motdDisplay = document.getElementById('motd-display');
            const statusTimerPrompt = document.getElementById('status-timer-prompt');
            const countdownElement = document.getElementById('countdown');
            
            // Modern clipboard API with toast notification
            async function copyToClipboard(text) {
                try {
                    await navigator.clipboard.writeText(text);
                    showToast('Copied to clipboard: ' + text);
                } catch (err) {
                    console.error('Failed to copy: ', err);
                    showToast('Failed to copy text');
                }
            }
            
            // Toast notification function
            function showToast(message) {
                const toast = document.createElement('div');
                toast.className = 'fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-4 py-2 rounded-lg shadow-lg z-50 animate-fade-in-up';
                toast.textContent = message;
                document.body.appendChild(toast);
                
                setTimeout(() => {
                    toast.classList.add('animate-fade-out');
                    setTimeout(() => toast.remove(), 300);
                }, 3000);
            }
            
            // Add styles for animations
            const style = document.createElement('style');
            style.textContent = `
                @keyframes fadeInUp {
                    from { opacity: 0; transform: translate(-50%, 10px); }
                    to { opacity: 1; transform: translate(-50%, 0); }
                }
                @keyframes fadeOut {
                    from { opacity: 1; }
                    to { opacity: 0; }
                }
                .animate-fade-in-up {
                    animation: fadeInUp 0.3s ease-out forwards;
                }
                .animate-fade-out {
                    animation: fadeOut 0.3s ease-out forwards;
                }
            `;
            document.head.appendChild(style);
            
            // Event listeners with modern feedback
            javaIpButton.addEventListener('click', () => copyToClipboard('connect.zapto.org'));
            eaglerIpButton.addEventListener('click', () => copyToClipboard('ws://connect.zapto.org:8081/'));
            
            // Enhanced server status checker
            async function checkServerStatus() {
                const serverAddress = 'connect.zapto.org';
                const serverPort = 25565;
                
                try {
                    const response = await fetch(`https://api.mcstatus.io/v2/status/java/${serverAddress}:${serverPort}`);
                    
                    if (!response.ok) {
                        throw new Error(`HTTP error! Status: ${response.status}`);
                    }
                    
                    const data = await response.json();
                    updateStatusDisplay(data);
                } catch (error) {
                    console.error("Error fetching server status:", error);
                    setOfflineStatus();
                }
            }
            
            function updateStatusDisplay(data) {
                if (data.online) {
                    // Update status indicator
                    statusIndicator.className = 'status-indicator status-online pulse-slow';
                    onlineStatusDisplay.textContent = "Server is online";
                    onlineStatusDisplay.className = 'text-xl font-semibold text-green-400';
                    
                    // Update player count
                    const players = data.players;
                    if (players) {
                        playerCountDisplay.innerHTML = `Players: <span class="text-white">${players.online}</span>/<span class="text-white">${players.max}</span>`;
                    } else {
                        playerCountDisplay.textContent = "Players: N/A";
                    }
                    
                    // Update MOTD with formatted colors
                    const motd = data.motd?.raw;
                    if (Array.isArray(motd) && motd.length > 0) {
                        let motdText = processMinecraftColors(motd.join(" "));
                        motdDisplay.innerHTML = motdText;
                    } else if (typeof motd === 'string') {
                        let motdText = processMinecraftColors(motd);
                        motdDisplay.innerHTML = motdText;
                    } else {
                        motdDisplay.innerHTML = '<div class="text-gray-400 italic">No MOTD available</div>';
                    }
                } else {
                    setOfflineStatus();
                }
            }
            
            function setOfflineStatus() {
                statusIndicator.className = 'status-indicator status-offline';
                onlineStatusDisplay.textContent = "Server is offline";
                onlineStatusDisplay.className = 'text-xl font-semibold text-red-400';
                playerCountDisplay.textContent = "Players: -/-";
                motdDisplay.innerHTML = '<div class="text-gray-400 italic">Server is currently offline</div>';
            }
            
            // Enhanced Minecraft color processor
            function processMinecraftColors(text) {
                if (!text) return '';
                
                const colorMap = {
                    '0': 'mc-color-0', '1': 'mc-color-1', '2': 'mc-color-2', '3': 'mc-color-3',
                    '4': 'mc-color-4', '5': 'mc-color-5', '6': 'mc-color-6', '7': 'mc-color-7',
                    '8': 'mc-color-8', '9': 'mc-color-9', 'a': 'mc-color-a', 'b': 'mc-color-b',
                    'c': 'mc-color-c', 'd': 'mc-color-d', 'e': 'mc-color-e', 'f': 'mc-color-f',
                    'l': 'mc-format-bold', 'm': 'mc-format-strikethrough',
                    'n': 'mc-format-underline', 'o': 'mc-format-italic', 'k': 'mc-format-obfuscated',
                    'r': '' // reset
                };
                
                let result = '';
                let openSpans = [];
                let inColorCode = false;
                let currentColorCode = '';
                
                // Split the text into parts that need processing
                const parts = text.split(/(ยง[0-9a-fk-or])/i);
                
                parts.forEach(part => {
                    if (part.startsWith('ยง')) {
                        // This is a color code
                        const code = part.substring(1).toLowerCase();
                        
                        if (code === 'r') {
                            // Reset - close all open spans
                            while (openSpans.length > 0) {
                                result += '</span>';
                                openSpans.pop();
                            }
                        } else if (colorMap[code]) {
                            // Open a new span with the appropriate class
                            const spanClass = colorMap[code];
                            result += `<span class="${spanClass}">`;
                            openSpans.push(spanClass);
                        }
                    } else if (part) {
                        // Regular text - add to result
                        result += part;
                    }
                });
                
                // Close any remaining open spans
                while (openSpans.length > 0) {
                    result += '</span>';
                    openSpans.pop();
                }
                
                return result;
            }
            
            // Start the status checker with countdown
            let countdown = 5;
            
            function updateCountdown() {
                countdown--;
                countdownElement.textContent = countdown;
                
                if (countdown <= 0) {
                    countdown = 5;
                    checkServerStatus();
                }
            }
            
            // Initial check
            checkServerStatus();
            
            // Set up the interval
            setInterval(updateCountdown, 1000);
        });
    </script>
</body>
</html>
